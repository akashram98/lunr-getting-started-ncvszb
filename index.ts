import * as lunr from 'lunr';

// Import stylesheets
import './style.css';

// Write TypeScript code!
const appDiv: HTMLElement = document.getElementById('app');

appDiv.innerHTML = `
This is based on <a href="https://lunrjs.com/guides/getting_started.html">Getting Started: lunr</a> but the TypeScript version is quite different (but don't worry about that).
`;

function prtt(s) {
  appDiv.innerHTML += '<br><br>' + JSON.stringify(s);
}

function printLength(objectRes, mainRes) {
  // prtt(objectRes.length);
  var returnRes = 0;
  if (objectRes.length > 0) {
    for (var i = 0; i < objectRes.length; i++) {
      mainRes = objectRes[i].matchData.metadata;
      returnRes = returnRes + Object.keys(mainRes).length;
    }
  }
  prtt(returnRes);
}

const documents = [
  {
    name: '5722018435',
    text: 'We reject this argument because section 5340 does not clearly impose a time requirement on when the billing by providers must occur. Rather, it can reasonably be read as requiring that, when billing does occur, it must be documented. Under the California system, provider billing of all third party liable resources was documented. Section 2089 of the California Medicaid Procedures Manual requires Regional Centers to bill insurance companies prior to seeking reimbursement from Medicaid for claims with other health coverage and requires them to maintain documentation of their efforts to recover third party reimbursement.California Ex. 43, Att. C. The fact that this billing and documentation occurs subsequent to Californias claims for FFP for TCM services without other health coverage is not relevant to whether documentation occurs. Again, HCFA has focused on the timing of the billing and documentation process rather than the fact that California had a system for requiring billing as a prerequisite to claiming under Medicaid.Nor did the delay of some Regional Centers in billing third parties prejudice HCFAs legitimate interest in ensuring that states recover all possible third party reimbursement and that HCFA not participate in unnecessary costs. In this case, HCFA never disputed Californias representation that its MEDS system eliminated claims with other health coverage from the federal claiming process until the Regional Centers completed their billing procedures. Therefore, not only did Californias system satisfy all federal standards for cost avoidance systems, it also satisfied the purpose of those requirements: it excluded claims with potential health insurance coverage from the federal claiming process.Finally, while the majority of Regional Centers did not have functioning billing systems prior to the end of the disallowance period, the Regional Centers were not precluded from later billing for services which they had previously provided. In fact, this was required as a prerequisite for resubmitting a Medicaid claim.',
  },
  {
    name: '5722018436',
    text: 'If you scrape your knee or break an arm, your body knows right what to do: make more skin or bone to replace the damaged tissue. But its not that simple if whats hurt is your heart. When cardiac muscle is destroyed by a heart attack, cardiomyopathy, or other illness or injury, there are no replacement parts waiting in the wings.In some patients, a heart transplant or a mechanical device can help restore at least some of the lost function. But in most instances, the owner of the damaged heart is sentenced to a life of downward spiraling health as the surviving cells literally work themselves to death struggling to do the job of their fallen comrades. Soon, however, that picture may change. With the creation of the Center for Cardiovascular Repair (CCVR) at the University of Minnesota, the stage has been set for moving a revolutionary heart-mending strategy from the laboratory to real life.Known as cellular cardiomyoplasty, the approach involves infusing living cells from other parts of a persons body into his or her heart to restore lost function. This revolutionary approach has been shown to improve heart function in animals and has begun to be tested in humans, with encouraging preliminary results. The rigor of randomized clinical trials is next. CCVR director Doris Taylor should know better than just about anyone what promise this new technology has to offer. In 1998, Taylor led a research team at Duke University in North Carolina that published a paper showing improvement in the function of damaged heart tissue in rabbits after transplantation of leg muscle cells. ',
  },
  {
    name: '5722018437',
    text: 'Reiterating his support for the troop "surge" to Iraq announced recently by President Bush, McCain said on NBCs Meet the Press that U.S. policy had produced Iraqi turmoil so bad that, if no change were made, "within months we would see a total breakdown in Iraq." The result, he said, would be ethnic cleansing between rival religious groups in the capital on the scale of that in Srebrenica, where Serbian military forces slaughtered 8,000 Bosnian Muslims in 1995."We cant expect Americans to sit outside Baghdad or outside the borders and watch such a thing go on," McCain said.While he said he preferred a larger troop buildup than the new 21,500-person deployment proposed by Bush, McCain said the new U.S. military commander in Iraq, Lt. Gen. David H. Petraeus, had assured him that if Petraeus "needed more, he would receive them."The Senate Foreign Relations Committee is expected to take up resolutions on Iraq on Wednesday, some nonbinding and others that would cap the number of U.S. troops there or reduce future funding for American or Iraqi security forces.Sen. Joseph R. Biden Jr. (D-Del.), chairman of the committee and co-sponsor of a bipartisan, nonbinding resolution that would put senators on record as opposing Bushs plan, said votes on other approaches would not deliver a muddled message."Theres an overwhelming . . . consensus that we should deescalate the war," he added during an appearance on "Fox News Sunday."Sen. Carl M. Levin (D-Mich.), chairman of the Armed Services Committee, said on the same program, "It will be a very powerful message if a bipartisan majority of the Congress say that they disagree with the increased military involvement in Iraq." He added that could only be a first step: "If the president does not take heed to that step, at that point, you then consider another step."Levin warned, however, "The worst thing we can do is to vote on something which is critical of the current policy and lose it, because if we lose that vote, the president will use the defeat of a resolution as support for his policy."Unlike Petraeus, Casey has been privately skeptical about the wisdom of deploying five new brigades now.',
  },
  {
    name: '5722018438',
    text: 'Even after the famine had passed, the mother church at Jerusalem continued poor. Why, we do not know. An explanation has been sought in the early attempt by which that church is said to have introduced a voluntary community of goods; it was the failure of this attempt, we are to believe, that left the local church impoverished. This is merely a vague conjecture. Nevertheless, the poverty at Jerusalem remains a fact. At the critical conference in Jerusalem, when the three pillar-apostles definitely recognized Pauls mission to the Gentiles, the latter pledged himself to remember the poor saints at Jerusalem in distant lands; and the epistles to the Galatians, the Corinthians, and the Romans, show how widely and faithfully the apostle discharged this obligation. His position in this matter was by no means easy. He had made himself responsible for a collection whose value depended entirely on the voluntary devotion of the churches which he founded.Corinth being endangered by a severe local crisis, he did not fail to remember the business of the collection along with more important matters. The local arrangements for it had almost come to a standstill by the time he wrote, and the aim of his vigorous, affectionate, and graceful words of counsel to the church is to revive the zeal which had been allowed to cool amid their party quarrels (2 Cor. 8.9). Not long afterwards he is able to tell the Romans that "those of Macedonia and Achaia freely chose to make a certain contribution for the poor saints at Jerusalem. They have done it willingly, and indeed it was a debt. For if the Gentiles have been made partakers of their spiritual things, they owe it to them also to minister to them in secular things"Neither statement explains if it was only members of the particular church in question who were thus supported. This, however, is inherently improbable, and there are express statements to the contrary, including one from a pagan source.Christians about the year 170: "From the very first you have had this practice of aiding all the brethren in various ways and of sending contributions to churches in manyevery city, thus in one case relieving the poverty of the needy, or in another providing for brethren in the mines. By these gifts, which you have sent from the very first, you Romans keep up the hereditary customs of the Romans, a practice your bishop Soter has not merely maintained but even extended."',
  },
  {
    name: '5722018439',
    text: 'With regards to Saudi Arabia, the ruling system is monarchial which contradicts Islam. Article 5(a) of the constitution states, "The system of government in the Kingdom of Saudi Arabia is that of a monarchy."The economic solutions also contradict Islam on a number of different levels. With respect to oil we find that it is not public property but is largely privately owned, which is the case in Saudi Arabia - Aramco.We also find that economic solutions are dervied from free market thinking, which is evident in the privatisation process in Iran. The problem here is with the basis of thinking. Islam specifies what is public, private and state ownership. Iran is going from one extreme to another, from nationalisation to privatisation.I ask this because I consider respectful peer-based relationships and constructive coexistence across ethnic, religious, class, etc. lines to be *the* toughest challenge to democracy; people of like mind can and do establish some very smoothly operating communities on small (sub-national) scales, but there seems to be a size limit and it appears to be closely related to considerations of how large a group one can find where most of the people are an ideological match.We live *today* under a global economic regime which continually redistributes wealth...UPWARD.  This regime is very much based upon massive and routine violence, both through state and non-state actors.Muslims seem to follow the same pattern as adherents of other faiths when it comes to politicoeconomic systems, i.e. you have a handful of people who stick up for economic justice within any faith, but the majority take the windvane approach and just go along with whatever regime is dominant.In Islam we can see things like Ramadan, which involve clear appeals to consider the plight of the poor.  In Christianity we have things like the "eye of the needle" passage and a host of callings to transcend the temporal world of earthly possessions in favor of spiritual wealth.  In Judaism there is the notion of healing the world...and so on for every major faith community I can think of.However, the overwhelming majority of adherents to each of these faiths seems perfectly content to settle for piecemeal gestures towards economic justice while tolerating (if not openly celebrating and participating in) inherently exploitative and violent economic regimes.',
  },
  {
    name: '5722018440',
    text: 'I think a second factor that accounts for the great satisfaction reported -- and, of course, I have to say this is self-reported, so, you know, I cant say J.D. Powers said this, but theres a dearth of other information.Nonetheless, I think that one of the reasons that weve been so successful is that our operators and our passengers have a willingness to negotiate the experience, which is to say that the very concerns that Don Backe just mentioned have been made a matter of conversation between the prospective passenger and the prospective carrier, and theyve worked it out, and quite apparently to everyones satisfaction.Theres a saying that there are only three rules to seamanship, okay: you keep the water on the outside, you keep the people on the inside, and you keep the boat off the land. Anything after thats gravy.Well, you can say the same thing about surveying the disabled population in vessels. You get them on the boat safely, you give them the best experience you can thats as close as possible to what everybody else gets, and you get them off the boat safely. Cucharacha, thats it. The rest of its details.And the fact of it is we have been doing that. I think the major problem with that option, though, is this inevitable tendency to start getting down and saying, well, you know, we need to be more specific about this and say that a person needs to be put on in thus and such a way. Or, you know, the more specific those performance recommendations become, the more and more they begin to look like what? They begin to look like the C&T rules in option 2.In option 4, I think, basically, there is no magic number when it comes to passengers. The fact of it is, as Paul pointed out, we inherited this, obviously, to some extent arbitrary line from the Coast Guard and from their relatively recently overhauled framework of vessel classification.I have to say that, even though it was not purpose made for us, it does, I think, reflect some very valuable characteristics, some of which are economically driven and some of which are feasible or infeasible as a matter of physics.The fact of it is you are never going to find a 51-passenger cruise ship. It just is never going to happen because its not economically feasible. You are probably not going to find a 60-passenger cruise ship. I mean, at some point, you know, there is a number there where economic feasibility makes it possible.And, likewise, I think that what this really points to is that probably more important than some sort of arbitrary number of passengers are the programmatic aspects of what the vessel does, all right, because that is also going to be interrelated with the physical thing.Its very unlikely that youre going to find a 5,000-person sailing ship. Its very unlikely youre going to find a 50-person cruise ship.',
  },
  {
    name: '5722018441',
    text: 'MUSE has begun the process of disconnecting the electronic collection price from the individual print price for each journal.  While some new journal titles may be added for 2005, they will not affect the price of each collection in the way that the addition of new content has done in the past. If MUSE has a significant number of new high quality titles wishing to participate, MUSE will explore/consider the development of a new collection.Libraries do still have the option of subscribing on a title-by-title basis to any journal for which the publisher has opted to have MUSE sell single titles. They may subscribe to single titles at the rates set by the publishers in addition to holding a collection subscription. At this time MUSE does not have the functionality to provide individualized flex plans for a discounted price, but MUSE will continue to offer a consortium flex plan (at least 5 libraries, and at least 100 titles must be selected, and the final discount will be based on the total number of each).For the purposes of pricing, Project MUSE categorizes North American academic libraries into tiers based upon Carnegie Classification. This criterion was chosen because it represents, in essence, the level of research activity at an institution and its relation to the institutions mission. Carnegie Classification is a commonly-agreed upon typology, is determined by a respected third-party organization, and had widespread acceptance among MUSE subscribers as an acceptable categorization tool during pricing research. Because Canadian institutions are not classified by the Carnegie Foundation, these institutions have been "mapped" into the five pricing tiers based upon similar criteria related to research activity and educational mission.UNAIDS has five focus areas including: leadership and advocacy, strategic information and technical support, tracking monitoring and evaluation, civil society engagement and mobilization of resources.There have been steady improvements in the modelling methodology used by UNAIDS/WHO and partners, along with better data from country surveillance. These have led to lower global HIV/AIDS estimates, not just for the current year but also for past years, despite the continued expansion of the global epidemic. Current estimates therefore cannot be compared directly with estimates from previous years, nor with those that may be published subsequently.UNAIDS and WHO continue to work with countries, partner organizations and experts to improve data collection. These efforts will ensure that the best possible estimates are available to assist governments, non-governmental organizations and others in gauging the status of the epidemic and monitoring the effectiveness of prevention and care efforts.The reach, expertise and institutional resources of the business sector are vital for a broadened and strengthened AIDS response. Workplace programmes developed in full partnership with unions or workforce representatives can help ensure broad-based participation by workers as their involvement engenders ownership, less fear of discrimination, greater trust of prevention messages, and higher take-up of services such as testing and treatment.',
  },
  {
    name: '5722018442',
    text: 'After 24 hours, have the students peel off the paper cup to reveal the pretend sedimentary rock. Doing this as a group will allow the children to compare rocks and talk about how their rocks are made of different size particles.Marie Faust Evitt, a teacher at the Mountain View Parent Nursery School in Mountain View, California, is always on the lookout for stories that incorporate accurate science. She finds children absorb information more easily through an engaging tale. These are some of her favorites featuring geology and rocks.BooksThe Sun, the Wind, and the Rain. Lisa Westberg Peters. 1988. Henry Holt.This beautifully illustrated book provides an excellent introduction to geologic processes by comparing the creation and evolution of mountains with a sand hill that a girl builds at the beach. Children can readily see the connection between their own experiences with sand and the weathering of the natural landscape.As students bring in items, have them assign the item a number and write down on some kind of an entry form a description including the type, color, size (diameter measurement or relative size), any special features, and where they collected it.After the items have been collected, have each student sort the items (such as lids) in the collection according to groupings they determine. This could be done over a week, individually or in small groups. Color is often the first attribute that students sort by. Other categories include size, screw-on or snap-on, type of container (water, soda, or sports drink bottles, ketchup bottle, mayonnaise jar, or milk jug), and one-piece or flip-top.It is convenient to begin with a collection of human-made items but students should also work with a collection of natural items to build knowledge about the natural world. Establishing and maintaining a collection can be a lifelong activity. Finding a purpose in and passion for collecting does not end with adulthood, as evidenced by the existence of museums, collectors? conventions, and the National Association of Collectors.Susan J. Johnson is a preschool teacher in Alexandria, Virginia, and an assistant professor in Early Childhood Education at Northern Virginia Community College. She begins the year with a literacy component to give children direction in their natural tendency to collect. These are some of her favorite resources for this work.If You Find a Rock. Peggy Christian and Barbara Lember. 2000. Harcourt.Full of photographs and suggestions on how rocks might be used, this book helps children observe rocks everywhere and begin to speculate on what kind of rock they have found. Further exploration often leads to discovering that some rocks are actually bits of concrete and the realization that the sand in our sandbox is made up of rocks.Sylvester and the Magic Pebble.',
  },
  {
    name: '5722018443',
    text: 'In terms of sober historical scholarship the greatest value of the concept has been that of a heuristic device leading to important corrections of received ideas. It is itself now subject to serious criticism.Civic humanism is generally taken as an equivalent or as a particular variant of republicanism, meaning a conception of politics in which government is in principle the common business of the citizens. The city provides the environment -- a public space -- for human fulfillment. If, on the one hand, the republic is contrasted to personal or authoritarian government it also differs from the liberal model in which the constitution provides a formal frame that embraces citizens of diverse moral character and with varied individual pursuits. The republic rests rather on the virtues of its citizens and is oriented toward the common good. The virtues of citizenship are in turn developed and enhanced by being exercised in upholding republican political and legal institutions and making them work by being involved in their operation. Republican life is then thought to be formative of the public spirit on which it rests. Republican freedom depends on constant civic activity. The polity is taken to cohere by means of the common acceptance of standards of justice that are more than procedural rules. The purpose of the commonwealth is not so much peace and ensuring the rights of individuals, as the realization of human potentiality, which is taken to be essentially political. The republic is the necessary medium of self-realization, not merely the condition of possibility of private endeavors. Indeed, a certain amount of conflict, properly contained, adds to the liveliness and vigor of the republic. There is a link furthermore between the freedom of the citizen and the independence of the republic. Citizen armies and the right to bear arms are therefore common postulates of republican theory.Civic humanism is linked in principle to a classical educational program that goes beyond the formative capacity of participatory citizenship itself and involves the conscious revival of ancient ideals. How true this is of the educational practice of late Atlantic epigones of the republican tradition is a different matter. Republican candor, simplicity of manner, opposition to ostentation, luxury and lucre, are common, though not universal republican themes. Some theorists also dwell on the millenarian aspirations associated with republican ideals responding to the fragility of the republic and the need to provide against its corruption and decay with the passage of time.The concept was first used to characterize a cluster of historical phenomena of Renaissance Florence. It was then extended to mark a republican tradition or political language reaching back to classical antiquity. It finally came to indicate a political ideal opposed to both classical liberal and authoritarian views of politics.Its adoption by historians of ideas is linked with particular ways of doing history, first in the context of German historicist Geisteswissenschaften, then in connection with the methods developed by the ‘Cambridge School’, centered on the reconstruction of political discourses, exemplified by John Pocock and Quentin Skinner.',
  },
];

const builder = new lunr.Builder();
builder.ref('name');
builder.field('text');

documents.forEach((i) => builder.add(i));

const idx = builder.build();

// prtt({idx})

// const results0 = idx.search('bright'); // should return 0 results
// const results1 = idx.search('bright.'); // should return 1 result
// const results2 = idx.search('mod*'); // should return 1 result

// prtt('Length of res: ' + results0.length);
// prtt('Length of res: ' + results1.length);
// prtt('Length of res: ' + results2.length);

const results1 = idx.search('The');
const results2 = idx.search('right');
var res1 = {};
var res2 = {};
prtt({ results1, results2 });
printLength(results1, res1);
printLength(results2, res2);
// if (results1.length > 0) {
//   res1 = results1[0].matchData.metadata;
// }
// if (results2.length > 0) {
//   res2 = results2[0].matchData.metadata;
// }

// prtt(Object.keys(res1).length);
// prtt(Object.keys(res2).length);
